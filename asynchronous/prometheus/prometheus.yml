global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'async-microservices-monitor'
    architecture: 'event-driven'

scrape_configs:
  # cAdvisor - Container metrics (CPU, Memory, Network, etc.)
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']

  # RabbitMQ Management metrics
  - job_name: 'rabbitmq'
    static_configs:
      - targets: ['rabbitmq:15672']
    metrics_path: '/api/metrics'
    basic_auth:
      username: 'guest'
      password: 'guest'

  # UserService metrics
  - job_name: 'userservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['userservice:8000']
        labels:
          service: 'userservice'
          scenario: 'scenario1'
          pattern: 'publisher'

  # EmailService metrics
  - job_name: 'emailservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['emailservice:8000']
        labels:
          service: 'emailservice'
          scenario: 'scenario1'
          pattern: 'consumer'

  # PaymentService metrics
  - job_name: 'paymentservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['paymentservice:8000']
        labels:
          service: 'paymentservice'
          scenario: 'scenario2,scenario5'
          pattern: 'publisher-consumer'

  # ProductService metrics
  - job_name: 'productservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['productservice:8000']
        labels:
          service: 'productservice'
          scenario: 'scenario3'
          pattern: 'fanout-publisher'

  # SearchService metrics
  - job_name: 'searchservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['searchservice:8000']
        labels:
          service: 'searchservice'
          scenario: 'scenario3'
          pattern: 'fanout-consumer'

  # CacheService metrics
  - job_name: 'cacheservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['cacheservice:8000']
        labels:
          service: 'cacheservice'
          scenario: 'scenario3'
          pattern: 'fanout-consumer'

  # AnalyticsService metrics
  - job_name: 'analyticsservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['analyticsservice:8000']
        labels:
          service: 'analyticsservice'
          scenario: 'scenario3,scenario6'
          pattern: 'fanout-consumer-publisher'

  # ReportService metrics
  - job_name: 'reportservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['reportservice:8000']
        labels:
          service: 'reportservice'
          scenario: 'scenario4'
          pattern: 'publisher-consumer'

  # OrderService metrics
  - job_name: 'orderservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['orderservice:8000']
        labels:
          service: 'orderservice'
          scenario: 'scenario5'
          pattern: 'saga-orchestrator'

  # InventoryService metrics
  - job_name: 'inventoryservice'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['inventoryservice:8000']
        labels:
          service: 'inventoryservice'
          scenario: 'scenario5'
          pattern: 'saga-participant'
